<!DOCTYPE html>
<html>
    <head>
        <title>w3. 01. TODO1</title>
        <style>
            p, input { font-family: monospace; }
            p { white-space: pre; }
        </style>
        <script src="https://unpkg.com/vue/dist/vue.js"></script>
    </head>
    <body>
        <h2>w3 01 TODO1</h2>
        <br/>
        <form>
            <div id="calk">
                <p><input v-model="x" lazy> first number</p>
                <p><input v-model="y" lazy> second number</p>
                <p>---------------------</p>
                <button v-on:click="result" type="submit">new Multiply button</button>
                <!-- <button v-on:click="result2" type="button">new divide button</button> -->

                <!-- EN NYT SAANUT NAPPIA TOIMIMAAN 3tunnin googlettamisen kanssa, muuten Vue:n logiikka on ymmärretty. Olisipa saanut tähän toimivaa esimerkkiä, niin olisi jotain mihin verrata. 
ENS SAA TOIMIMAAN NAPIN PAINALLUKSEN KAUTTA.-->

                <p> ... </p>
                <span>Message is: {{ lasku }}</span>
                <p>= <span v-text="result1"></span></p>
            </div>
        </form>
        <script type="text/javascript">
            function isNotNumericValue(value) {
                console.log("testi NaN");
                return isNaN(value) || !isFinite(value);
            }

            //Here i chech if input is valid
            //OLD CODE!!!!! ^
            /* function checkInp()
            {
                var x=document.getElementById("firstNumber").value;
                var regex=/^[0a-zA-Z]+$/;
                if (x.match(regex)) {
                    alert("input must be numbers and bigger than 0");
                    return false;
                }
                if (x < 1) {
                    alert("input number should be bigger that 0");
                    return false;
                }
                var x=document.getElementById("secondNumber").value;
                var regex=/^[a-zA-Z]+$/;
                if (x.match(regex)) {
                    alert("input must be numbers and bigger than 0");
                    return false;
                }
                if (x < 1) {
                    alert("input number should be bigger that 0");
                    return false; 
                }
            } */



            //calculation
            //OLD CODE!!!!!
            /*    function multiplyBy(){

                document.getElementById("result").innerHTML =
                    document.getElementById("firstNumber").value * document.getElementById("secondNumber").value;
            }
            function divideBy(){

                document.getElementById("result").innerHTML =
                    document.getElementById("firstNumber").value / document.getElementById("secondNumber").value;
            }
        */
           function lasku() {
                console.log("testi functiotesti");
                var multiply = new Vue({
                    el: '#calk',
                    data: { x: 0, y: 0, lastResult: 0 },
                    computed: {
                        result1: function() {
                            console.log("testi multiply");
                            let x = parseFloat(this.x);
                            if(isNotNumericValue(x))
                                return this.lastResult;

                            let y = parseFloat(this.y);
                            if(isNotNumericValue(y))
                                return this.lastResult;
                            this.lastResult = x * y;
                            return this.lastResult;

                            // Tällä laskettu arvo tallennetaan storageen
                            const calculations = this.lastResult; 
                        }
                    }
                });
            }
            // console.log(result);

            //document.getElementById("resultmsg1").addEventListener("click", jako);
            //function jako() {            
            /*           var divide = new Vue({
                    el: '#calk',
                    data: { x: 0, y: 0, lastResult: 0 },
                    computed: {
                        result2: function() {
                            console.log("testi divide");
                            let x = parseFloat(this.x);
                            if(isNotNumericValue(x))
                                return this.lastResult;

                            let y = parseFloat(this.y);
                            if(isNotNumericValue(y))
                                return this.lastResult;

                            this.lastResult = x / y;
                            return this.lastResult;    
                        }
                    }
                }); */

        </script>
    </body>
</html>